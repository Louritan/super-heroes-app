@if (loading) {
  <app-loading></app-loading>
} @else {
  <main class="flex flex-col items-center p-10">
    <div class="w-full max-w-4xl">
      <button type="button" class="flex items-center gap-2" (click)="goBack()" [disabled]="submitting">
        <div class="h-4 w-4 arrow-icon"
          style="mask: url('arrow-left.svg') no-repeat center; mask-size: contain; -webkit-mask: url('arrow-left.svg') no-repeat center; -webkit-mask-size: contain;">
        </div>
        Voltar
      </button>
      <div class="flex items-center justify-center">
        <div class="bg-gradient-to-br from-blue-600 to-fuchsia-400 bg-clip-text text-transparent font-bold text-3xl">
          @if (heroId) {
            Atualizar Herói
          } @else {
            Recrutar Novo Herói
          }
        </div>
      </div>
  
      <div class="mt-6 flex flex-col items-start gradient-card rounded-xl p-6 shadow-md"
        style="border: 1px solid rgba(255, 255, 255, 0.1);">
        <div class="text-xl font-bold mb-4">
          Informações do Herói
        </div>
        <form class="w-full">
          <div class="flex gap-4 w-full">
            <div class="flex-1">
              <label for="name" class="block font-medium mb-2">Nome real</label>
              <input
                type="text"
                name="name"
                placeholder="Ex: Peter Parker"
                class="w-full input-hero-focus rounded-lg p-2 text-white placeholder-gray-400"
                style="background-color: hsl(224 15% 15%); border: 1px solid rgba(255, 255, 255, 0.1);"
                [(ngModel)]="superHero.name"
                [disabled]="submitting"
              />
            </div>
            <div class="flex-1">
              <label for="hero-name" class="block font-medium mb-2">Nome do herói</label>
              <input
                type="text"
                name="hero-name"
                placeholder="Ex: Spider-Man"
                class="w-full input-hero-focus rounded-lg p-2 text-white placeholder-gray-400"
                style="background-color: hsl(224 15% 15%); border: 1px solid rgba(255, 255, 255, 0.1);"
                [(ngModel)]="superHero.heroName"
                [disabled]="submitting"
              />
            </div>
          </div>
  
          <div class="mt-4">
            <label for="hero-powers" class="block font-medium mb-2">Superpoderes</label>
            <ng-select
              name="hero-powers"
              [items]="superPowers"
              [multiple]="true"
              [(ngModel)]="superHero.superPowerIds"
              bindLabel="name"
              bindValue="id"
              placeholder="Selecione os poderes"
              class="w-full"
              style="background-color: hsl(224 15% 15%); border: 1px solid rgba(255, 255, 255, 0.1);"
              notFoundText="Nenhum super poder encontrado!"
              [disabled]="submitting"
            >
            </ng-select>
          </div>
          <div class="flex gap-4 w-full mt-4">
            <div class="flex-1">
              <label for="birth-date" class="block font-medium mb-2">Data de nascimento</label>
              <input
                type="date"
                name="birth-date"
                placeholder="Ex: 01/01/2000"
                class="w-full input-hero-focus rounded-lg p-2 text-white placeholder-gray-400"
                style="background-color: hsl(224 15% 15%); border: 1px solid rgba(255, 255, 255, 0.1);"
                [(ngModel)]="superHero.birthDate"
                [disabled]="submitting"
              />
            </div>
            <div class="flex-1">
              <label for="height" class="block font-medium mb-2">Altura</label>
              <input
                type="text"
                name="height"
                placeholder="Ex: 1.80m"
                class="w-full input-hero-focus rounded-lg p-2 text-white placeholder-gray-400"
                style="background-color: hsl(224 15% 15%); border: 1px solid rgba(255, 255, 255, 0.1);"
                [(ngModel)]="superHero.height"
                [disabled]="submitting"
              />
            </div>
            <div class="flex-1">
              <label for="weight" class="block font-medium mb-2">Peso</label>
              <input
                type="text"
                name="weight"
                placeholder="Ex: 75kg"
                class="w-full input-hero-focus rounded-lg p-2 text-white placeholder-gray-400"
                style="background-color: hsl(224 15% 15%); border: 1px solid rgba(255, 255, 255, 0.1);"
                [(ngModel)]="superHero.weight"
                [disabled]="submitting"
              />
            </div>
          </div>
  
          <div class="flex gap-4 mt-6">
            <button
              type="submit"
              class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-6 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2"
              (click)="handleSubmit()"
              [disabled]="submitting"
            >
              @if (submitting) {
                <div
                  class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"
                ></div>
              }
              {{ heroId ? 'Atualizar Herói' : 'Recrutar Herói' }}
            </button>
            <button
              type="button"
              class="border border-gray-600 hover:border-gray-500 px-6 py-2 rounded-lg font-medium transition-all duration-200"
              (click)="goBack()"
              [disabled]="submitting"
            >
              Voltar
            </button>
          </div>
        </form>
      </div>
    </div>
  </main>
}
